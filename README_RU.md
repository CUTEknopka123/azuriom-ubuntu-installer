[Read in English](README.md)

# Автоматический установщик Azuriom CMS (Русский)

Этот репозиторий содержит скрипт для полной автоматической установки и настройки [Azuriom CMS](https://azuriom.com/) на **чистый сервер Ubuntu 20.04 или 22.04**.

<br>

> [!CAUTION]
> ## КРИТИЧЕСКОЕ ПРЕДУПРЕЖДЕНИЕ О БЕЗОПАСНОСТИ
>
> **Этот скрипт НЕ является безопасным и содержит известные критические уязвимости.**
>
> * **Path Traversal (Обход каталога):** Скрипт позволяет обойти проверку домена (через `Continue? (y/N)`). Вредоносный ввод, такой как `domain.com/../../etc`, **ПРИВЕДЕТ к катастрофическому повреждению системы**, изменив права доступа к критическим системным папкам.
> * **Command Injection (Командная инъекция):** Ввод версии PHP не экранируется должным образом перед использованием в командах `systemctl`. Вредоносный ввод, такой как `8.3; reboot`, **ПОЗВОЛИТ выполнить произвольные команды от имени root**.
>
> **НЕ запускайте этот скрипт на любом важном сервере.** Он предоставляется **ИСКЛЮЧИТЕЛЬНО** в образовательных или личных тестовых целях для пользователей, которые полностью понимают и принимают эти риски.

---

## Ключевые возможности

* **Полная автоматизация:** Устанавливает полный веб-стек и Azuriom CMS с минимальным участием пользователя.
* **Интерактивная настройка:** Запрашивает ваш домен, email (для SSL) и желаемую версию PHP (8.1, 8.2, 8.3).
* **Полный LEMP-стек:** Устанавливает Nginx, MySQL и PHP-FPM из стабильного репозитория `ppa:ondrej/php`.
* **Настройка безопасности "из коробки":**
    * **Брандмауэр `ufw`:** Настраивает брандмауэр, разрешая только SSH, HTTP и HTTPS.
    * **`fail2ban`:** Устанавливает и включает `fail2ban` для защиты от брутфорс-атак (особенно на SSH).
    * **`unattended-upgrades`:** Настраивает автоматическую установку системных обновлений безопасности.
    * **Защита MySQL:** Защищает `root` пользователя MySQL и создает выделенного, изолированного пользователя базы данных для Azuriom.
* **Бесплатный SSL (HTTPS):** Автоматически устанавливает `certbot` и пытается получить бесплатный SSL-сертификат от Let's Encrypt, включая принудительный редирект на HTTPS.
* **Генерация безопасных паролей:** Автоматически создает надежные, уникальные пароли для `root` пользователя MySQL и базы данных Azuriom.
* **Сохранение учетных данных:** Сохраняет все сгенерированные пароли и данные о БД в файл `/root/azuriom_credentials.txt`.

---

## Что будет установлено (Стек)

Этот скрипт установит и настроит следующие компоненты на вашем сервере:

* **Веб-сервер:** `Nginx`
* **База данных:** `MySQL Server`
* **PHP:** `PHP-FPM` (Выбор 8.1, 8.2, 8.3 через `ppa:ondrej/php`)
    * **Необходимые расширения:** `mysql`, `bcmath`, `xml`, `curl`, `zip`, `mbstring`, `tokenizer`, `ctype`, `gd`
* **Менеджер PHP:** `Composer`
* **SSL:** `Certbot` (от Let's Encrypt)
* **Безопасность:**
    * `UFW` (Брандмауэр)
    * `Fail2Ban`
    * `Unattended-Upgrades` (Автообновления)
* **CMS:** `Azuriom` (Версия, определяемая скриптом, или `v1.2.7` в случае сбоя)

---

## Требования

Для использования скрипта вам необходимо:

1.  **"Чистый", одноразовый сервер Ubuntu** (рекомендуется 20.04 или 22.04 LTS).
2.  **Доменное имя** с **A-записью**, направленной на IP-адрес вашего сервера.
3.  Доступ с правами **Root** или `sudo`.

---

## Использование

1.  Подключитесь к вашему серверу по SSH.
2.  Скачайте русский скрипт:
    ```bash
    wget [https://raw.githubusercontent.com/CUTEknopka123/azuriom-ubuntu-installer/main/azuriom_RUS.sh](https://raw.githubusercontent.com/CUTEknopka123/azuriom-ubuntu-installer/main/azuriom_RUS.sh)
    ```

3.  Сделайте скрипт исполняемым:
    ```bash
    chmod +x azuriom_RUS.sh
    ```
4.  Запустите скрипт от имени root (на свой страх и риск):
    ```bash
    sudo ./azuriom_RUS.sh
    ```
5.  Ответьте на вопросы о вашем домене, email и версии PHP. Остальное произойдет автоматически.

---

## После установки

1.  **Откройте ваш домен** в веб-браузере (`https://your-domain.com`).
2.  Вы увидите веб-установщик Azuriom. Следуйте инструкциям на экране.
3.  Когда установщик запросит данные базы данных, получите их из файла на сервере:
    ```bash
    sudo cat /root/azuriom_credentials.txt
    ```
4.  **Сохраните эти учетные данные в надежном месте!** Этот файл содержит ваш `root` пароль от MySQL.
